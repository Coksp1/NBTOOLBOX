function makeGUI(gui)
% Syntax:
%
% makeGUI(gui)
%
% Description:
%
% Part of DAG.
% 
% Written by Kenneth Sæterhagen Paulsen

% Copyright (c) 2021, Kenneth Sæterhagen Paulsen

    % Get the handle to the main program
    mainGUI = gui.parent;

    if isa(mainGUI,'nb_GUI')
        name = [mainGUI.guiName ': Rename'];
    else
        name = 'Rename';
    end
    
    % Create window
    currentMonitor    = nb_getCurrentMonitor();
    defaultBackground = get(0,'defaultUicontrolBackgroundColor');
    f = figure('visible',        'off',...
               'units',          'characters',...
               'position',       [65   15  70   17],...
               'Color',          defaultBackground,...
               'name',           name,...
               'numberTitle',    'off',...
               'menuBar',        'None',...
               'toolBar',        'None',...
               'resize',         'off',...
               'windowStyle',    'modal');
    nb_moveFigureToMonitor(f,currentMonitor,'center');
    
    % Find the coordinate parameters
    startX          = 0.14;
    width           = 1 - startX*2;
    height          = 0.09;
    listExtraHeight = 0.02;
    startY1 = 0.8;
    startY2 = 0.55;
    startY3 = 0.3;

    
    uicontrol('units',              'normalized',...
              'position',           [startX, startY1,width,height],...
              'parent',             f,...
              'style',              'text',...
              'string',             'Rename',...
              'horizontalAlignment','left');   
    

    gui.renamepopup = uicontrol(...
                     'units',              'normalized',...
                     'position',           [startX, startY1-height-0.01,width,height + listExtraHeight],...
                     'parent',             f,...
                     'background',         [1 1 1],...
                     'style',              'popupmenu',...
                     'string',             {['Single ' gui.type];['All ' gui.type 's' ]},...
                     'horizontalAlignment','left',...
                     'callback',            @gui.popupCallback);
    
    

    gui.selectText = uicontrol( 'units',              'normalized',...
                            'position',           [startX, startY2,width,height],...
                            'parent',             f,...
                            'style',              'text',...
                            'string',             ['Select ' gui.type ' to rename'],...
                            'horizontalAlignment','left');             
   
    switch lower(gui.type)
        
        case 'variable'
            
            list = gui.data.variables;
            
        case 'page'
            
            list = gui.data.dataNames;
            % Gray out renamepopup to avoid conflicts later
            set(gui.renamepopup,'enable','off')
            
        case 'type'
            
            list = gui.data.types;
    end
    
    gui.popupmenu = uicontrol(...
                     'units',              'normalized',...
                     'position',           [startX, startY2-height-0.01,width,height + listExtraHeight],...
                     'parent',             f,...
                     'background',         [1 1 1],...
                     'style',              'popupmenu',...
                     'string',             list,...
                     'horizontalAlignment','left');         


    gui.idText = uicontrol('units',              'normalized',...
              'position',           [startX, startY2,width,height],...
              'parent',             f,...
              'style',              'text',...
              'string',             'Identifier',...
              'Visible',            'off',...
              'horizontalAlignment','left'); 
          
    gui.idBox = uicontrol(...
                     'units',              'normalized',...
                     'position',           [startX, startY2-height-0.01,width,height + listExtraHeight],...
                     'parent',             f,...
                     'background',         [1 1 1],...
                     'style',              'edit',...
                     'Visible',            'off',...
                     'horizontalAlignment','left');  
                  
   
    
    uicontrol('units',              'normalized',...
              'position',           [startX, startY3,width,height],...
              'parent',             f,...
              'style',              'text',...
              'string',             ['New name of ' gui.type],...
              'horizontalAlignment','left');             

    gui.editbox = uicontrol(...
                    'units',              'normalized',...
                    'position',           [startX, startY3-height-0.01,width,height],...
                    'parent',             f,...
                    'background',         [1 1 1],...
                    'style',              'edit',...
                    'horizontalAlignment','left'); 

                
    buttonWidth  = 0.25;
    buttonHeigth = 0.13;
    uicontrol('units',              'normalized',...
              'position',           [0.5 - buttonWidth/2, (0.20 - buttonHeigth)/2,buttonWidth,buttonHeigth],...
              'parent',             f,...
              'style',              'pushbutton',...
              'Interruptible',      'off',...
              'busyAction',         'cancel',...
              'string',             'Rename',...
              'callback',           @gui.renameVariableCallback);
          

    % Make GUI visible
    set(f,'visible','on');

end
